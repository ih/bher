(define samples 100)
(define lag 2)
(define runs 5)
(define error-tolerance 0.07)
;;(define gen-trees (repeat 10 (lambda () (lazy-list->all-list ((first (gen-tree)))))))
;;(pretty-print gen-trees)
;;(equal? tree '(node a))

(check-test (repeat runs
                    (lambda ()
                      (mh-query samples lag
                                (define tree (lazy-list->all-list (gen-tree)))
                                (define obs (smc-eval-obs-marginalize (first tree) 30))
                                (second tree)
                                (obs (lazy-list 'a)))))
            (lambda (b) b)
            .6086
            error-tolerance
            "scoring a single node")

